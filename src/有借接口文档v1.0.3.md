# 有借接口文档

[TOC]

### 商品类别

* 电子设备[1]
* 书籍资料[2]
* 宿舍百货[3]
* 乐器[4]
* 门票卡劵[5]
* 美妆护肤[6]
* 女装[7]
* 男装[8]
* 鞋帽配饰[9]
* 代步工具[10]
* 户外运动[11]
* 其他[12]

### 状态码

* 2200 - 成功
* 3302 - 未登录
* 3303 - 用户未认证
* 4400 - 参数错误
* 5500 - 服务错误

### 地址

* http://youjie.hustonline.net/api/v1/
* 上传数据格式: form-data
* 返回数据格式: json

### 图片

* 所有的图片以绝对地址返回**https://youjie.hustonline.net/photo/xxxx.png**

### 说明

* **所有涉及次数的如果我没有返回该字段说明用户或者商品未产生任何行为或者我还没有汇总数据, 可以设置为０或者是１**

## 商品页

### 首页

* path: /commodity/

* method: GET

* parameters:

  ```json
  {
   	"type": int,
    	"category": int,
      "address": string,
      "label": int,
    	"pages": int
  }
  ```

  **type: 出租-1, 求租-2**

  **category: 类别参照上面的表**

  **address: 寻求那栋楼的**

  **label分别对应上面的搜索要求, 最新-1, 最近-2, 最热-3, 最贵-4**

  **pages, 从1开始**

* response:

  ```json
  {
    "status": 200,
    "data": [{
      "_id": string,
      "type": string, // 出租的商品1, 求租的商品2
      "title": string,
      "description": string,
      "price": string, //价格
      "category": string,
      "is_deal": string, //是否可买或者可卖 1-不可买或者不可卖, 2-可买或者可卖
      "origin_price": string,
      "sell_price": string,
      "contact_way": string,
      "address": string,
      "pub_time": string,　// 发布时间, 时间戳(int)
      "num_of_view": int,
      "num_of_collect": int,
      "num_of_like": int,
      "num_of_rent": int,
      "pictures": [],
      "is_like": int,
      "is_collect": int
  }
  ```


  **返回的内容中可能没有num_of_collect等有关数据统计的字段, 因为应用不是实时的, 前端需要做好判断**

### 筛选

* path: /commodity/filter

* method: GET

* response:

  ```json
  {
  	"status": 200,
      "data": [{
       	"category": 1
          "description": ""
          "pictures": []
      }, {}]
  }
  ```


  **类别对应上面的商品类别**

### 发布页

* path: /commodity/pub

* method: POST

* parameters:

  ```json
  {
   	"_id": "",
      "type": "",
      "title": "",
      "description": "",
      "price": "",
      "category": "",
      "is_deal": "",
      "origin_price": "",
      "sell_price": "",
      "contact_way": "",
    	"pictures": [] #　files
  }
  ```

  **_id是用户后面的编辑操作, _id是商品的编号**

* response:

  ```json
  {
      "status": 200,
    	"data": {
          "_id": ""
      }
  }
  ```


### 详情页

#### 商品详情

* path: /commodity/detail

* method: GET

* parameters

  ```json
  {
      "_id": ""
  }
  ```

* response:

  ```json
  {
    "status": 200,
    "data": [{
      "_id": string,
      "type": string, // 出租的商品1, 求租的商品2
      "title": string,
      "description": string,
      "price": string, //价格
      "category": string,
      "is_deal": string, //是否可买或者可卖 1-不可买或者不可卖, 2-可买或者可卖
      "origin_price": string,
      "sell_price": string,
      "contact_way": string,
      "address": string,
      "pub_time": int,　// 发布时间, 时间戳(int)
      "num_of_view": int,
      "num_of_collect": int,
      "num_of_like": int,
      "num_of_rent": int,
      "pictures": [],
      "is_like": int,
      "is_collect": int
  }
  ```

  ​

#### 收藏

* path: /commodity/collect

* method: POST

* parameters:

  ```json
  {
      "_id": ""
  }
  ```

* response

  ```json
  {
      "status": 200,
    	"data": "成功"
  }
  ```



#### 喜欢

* path: /commodity/like

* method: POST

* parameters:

  ```json
  {
      "_id": ""
  }
  ```

* response

  ```json
  {
      "status": 200,
    	"data": "成功"
  }
  ```



#### 想买

* path: /commodity/buy

* method: POST

* parameters:

  ```json
  {
      "_id": "",
    	"type": ""
  }
  ```
  **type是商品的标识, 是出租商品还是求租商品**

* response:

  ```json
  {
      "status": 200,
      "data": "ok"
  }
  ```



#### 分享

- path: /commodity/share

- method: POST

- parameters:

  ```json
  {
      "_id": ""
  }
  ```

- response:

  ```json
  {
      "status": 200,
    	"data": ""
  }
  ```

  **当用户点击分享按钮的时候, 上传此信息**



## 搜索页

### 获取热门搜索

* path: /search/hot

* method: GET

* response:

  ```json
  {
      "status": 200,
    	"data": [
          "自行车",
          "电脑",
  		"吹风机"
      ]
  }
  ```




### 搜索商品

* path: /search

* method: POST

* parameters:

  ```json
  {
      "content": ""
  }
  ```

* response:

  ```json
  {
     "status": 200,
     "data": [{
          "_id": "", //商品的id
      	"type": "", // 出租的商品-1, 求租的商品-2
      	"title": "",
      	"description": "",
      	"price": "", //价格
      	"category": "",
      	"is_deal": "", //是否可买或者可卖 1-不可买或者不可卖, 2-可买或者可卖
      	"origin_price": "",
      	"sell_price": "",
      	"contact_way": "",
      	"address": "",
      	"pub_time": "",　// 发布时间, 时间戳(int)
      	"num_of_view": "",
      	"num_of_collect": "",
      	"num_of_like": "",
      	"num_of_rent": "",
      	"pictures": [],
      	"is_like": "",
      	"is_collect": ""
  	}, {}]
  }
  ```

  ​


## 用户页

### 个人主页

* path: /user

* method: GET

* response:

  ```json
  {
    "status": 200,
    "data": {
        "_id": "",
        "nick_name": "",
        "avatar_url": "",
        "status": "",
        "address": "",
        "money": "",
        "num_of_pub": "",
        "num_of_view": "",
        "num_of_collect": "",
        "num_of_rent": ""
    }
  }
  ```

  **返回的内容中可能没有num_of_collect等有关数据统计的字段, 因为应用不是实时的, 前端需要做好判断**

  **status为1时为认证, 2时已经认证**

### 获取个人信息

* path: /user/get_information

* method: GET

* response:

  ```json
  {
      "status": 200,
      "data": {
          "college": "",
      	"class": "",
      	"address": "",
      	"contact_way": "",
      	"name": "",
      	"card_type": "",
      	"study_number": "",
    		"picture": "",
      }
  }
  ```

  **card_type: 1: 校园卡: int**

### 编辑个人信息

* path: /user/update_information

* method: POST

* parameters:

  ```json
  {
      "college": "",
      "class": "",
      "address": "",
      "contact_way": "",
      "name": "",
      "card_type": "",
      "study_number": "",
    	"picture": "",
  }
  ```

* response:

  ```json
  {
  	"status": 200,
      "data": "ok"
  }
  ```



### 我发布的

* path: /user/pub

* method: GET

* response:

  ```json
  {
     "status": 200,
     "data": [{
      	"type": "", // 出租的商品-1, 求租的商品-2
      	"title": "",
      	"description": "",
      	"price": "", //价格
      	"category": "",
      	"is_deal": "", //是否可买或者可卖 1-不可买或者不可卖, 2-可买或者可卖
      	"origin_price": "",
      	"sell_price": "",
      	"contact_way": "",
      	"address": "",
      	"pub_time": "",　// 发布时间, 时间戳(int)
      	"num_of_view": "",
      	"num_of_collect": "",
      	"num_of_like": "",
      	"num_of_rent": "",
      	"pictures": [],
      	"is_like": "",
      	"is_collect": "",
        ""
  	}, {}]
  }
  ```

​       **返回的内容中可能没有num_of_collect等有关数据统计的字段, 因为应用不是实时的, 前端需要做好判断**

### 我的收藏

* path: /user/collect

* method: GET

* response:

  ```json
  {
     "status": 200,
     "data": [{
      	"type": "", // 出租的商品-1, 求租的商品-2
      	"title": "",
      	"description": "",
      	"price": "", //价格
      	"category": "",
      	"is_deal": "", //是否可买或者可卖 1-不可买或者不可卖, 2-可买或者可卖
      	"origin_price": "",
      	"sell_price": "",
      	"contact_way": "",
      	"address": "",
      	"pub_time": "",　// 发布时间, 时间戳(int)
      	"num_of_view": "",
      	"num_of_collect": "",
      	"num_of_like": "",
      	"num_of_rent": "",
      	"pictures": [],
      	"is_like": "",
      	"is_collect": "",
        "_id":
  	}, {}]
  }
  ```



### 我租出的

* path: /user/sell

* method: GET

* response:

  ```json
  {
     "status": 200,
     "data": [{
      	"type": "", // 出租的商品-1, 求租的商品-2
      	"title": "",
      	"description": "",
      	"price": "", //价格
      	"category": "",
      	"is_deal": "", //是否可买或者可卖 1-不可买或者不可卖, 2-可买或者可卖
      	"origin_price": "",
      	"sell_price": "",
      	"contact_way": "",
      	"address": "",
      	"pub_time": "",　// 发布时间, 时间戳(int)
      	"num_of_view": "",
      	"num_of_collect": "",
      	"num_of_like": "",
      	"num_of_rent": "",
      	"pictures": [],
      	"is_like": "",
      	"is_collect": ""
  	}, {}]
  }
  ```



### 我想租的

* path: /user/buy

* method: GET

* response:

  ```json
  {
     "status": 200,
     "data": [{
      	"type": "", // 出租的商品-1, 求租的商品-2
      	"title": "",
      	"description": "",
      	"price": "", //价格
      	"category": "",
      	"is_deal": "", //是否可买或者可卖 1-不可买或者不可卖, 2-可买或者可卖
      	"origin_price": "",
      	"sell_price": "",
      	"contact_way": "",
      	"address": "",
      	"pub_time": "",　// 发布时间, 时间戳(int)
      	"num_of_view": "",
      	"num_of_collect": "",
      	"num_of_like": "",
      	"num_of_rent": "",
      	"pictures": [],
      	"is_like": "",
      	"is_collect": ""
  	}, {}]
  }
  ```

### 取消

* path: /user/cancel

* parameter:

  ```json
  {
      "_id": ""
  }
  ```

* response:

  ```json
  {
      "status": 200,
      "data": "ok"
  }
  ```



## 登录

### 用户登录

* path: /login

* method: POST

* parameter:

  ```json
  {
      "code": ""
  }
  ```

* response:

  ```json
  {
      "status": 200,
    	"data": {
          "token": ""
      }
  }
  ```

* **以后每次上传放在header中, 字段名为token**

### 信息上传

* path: /upload

* method: POST

* parameters:

  ```json
  {
      "nick_name": "",
    	"avatar_url": ""
  }
  ```

* response:

  ```json
  {
      "status": 200,
    	"data": "ok"
  }
  ```

  ​

### 排行榜

### 微信

### 在用户有群进入小程序或者是分享小程序到群中是把群的GID传给我

* path: /rank/wechat_add

* method: POST

* parameter:

  ```json
  {
      "GID": ""
  }
  ```

* response:

  ```json
  {
      "status": 200,
    	"data": ""
  }
  ```

### 微信排行

* path: /rank/wechat

* method: GET

* response:

  ```json
  {
      "status": 200,
    	"data": [{
          "GID": ""
          "wealth_value": ""
      }, {}]
  }
  ```



### 楼栋

* path: /rank/address

* method: GET

* response:

  ```json
  {
      "status": 200,
      "data": [{
          "address": "",
          "wealth_value": ""
      }, {}]
  }
  ```

  ​
